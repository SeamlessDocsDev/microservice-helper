{"version":3,"sources":["../lib/validate.js"],"names":["validatePromisified","validateElementPromisified","JoiObjectId","_joiValidator","type","objectToValidate","schema","Promise","resolve","reject","validate","err","result","elementToValidate","v"],"mappings":";;;;;QAUgBA,mB,GAAAA,mB;QAcAC,0B,GAAAA,0B;;AAxBhB;;;;AACA;;;;;;AAEA,IAAMC,cAAc,yCAApB;;AAEA,SAASC,aAAT,CAAwBC,IAAxB,EAA8B;AAC5B,MAAIA,SAAS,UAAb,EAAyB,OAAOF,WAAP;AACzB,MAAI,OAAO,cAAIE,IAAJ,CAAP,KAAqB,UAAzB,EAAqC,OAAO,cAAIA,IAAJ,CAAP;AACtC;;AAEM,SAASJ,mBAAT,CAA6BK,gBAA7B,EAA+CC,MAA/C,EAAuD;;AAE5D,SAAO,IAAIC,OAAJ,CAAc,UAACC,OAAD,EAAUC,MAAV,EAAqB;;AAExC,kBAAIC,QAAJ,CAAaL,gBAAb,EAA+BC,MAA/B,EAAuC,UAACK,GAAD,EAAMC,MAAN,EAAiB;AACtD,UAAGD,GAAH,EAAQ,OAAOF,OAAOE,GAAP,CAAP;;AAERH,cAAQI,MAAR;AACD,KAJD;AAMD,GARM,CAAP;AAUD;;AAEM,SAASX,0BAAT,CAAoCY,iBAApC,EAAuDT,IAAvD,EAA6D;;AAElE,SAAO,IAAIG,OAAJ,CAAc,UAACC,OAAD,EAAUC,MAAV,EAAqB;;AAExC,QAAIK,IAAIX,cAAcC,IAAd,CAAR;;AAEA,kBAAIM,QAAJ,CAAaG,iBAAb,EAAgCC,GAAhC,EAAqC,UAACH,GAAD,EAAMC,MAAN,EAAiB;AACpD,UAAGD,GAAH,EAAQ,OAAOF,OAAOE,GAAP,CAAP;;AAERH,cAAQI,MAAR;AACD,KAJD;AAMD,GAVM,CAAP;AAWD","file":"validate.js","sourcesContent":["import Joi from 'joi'\nimport JoiObjectIdModule from 'joi-objectid'\n\nconst JoiObjectId = JoiObjectIdModule(Joi)\n\nfunction _joiValidator (type) {\n  if (type === 'ObjectId') return JoiObjectId\n  if (typeof Joi[type] === 'function') return Joi[type]\n}\n\nexport function validatePromisified(objectToValidate, schema) {\n\n  return new Promise ( (resolve, reject) => {\n\n    Joi.validate(objectToValidate, schema, (err, result) => {\n      if(err) return reject(err)\n\n      resolve(result)\n    })\n\n  })\n\n}\n\nexport function validateElementPromisified(elementToValidate, type) {\n\n  return new Promise ( (resolve, reject) => {\n\n    let v = _joiValidator(type)\n\n    Joi.validate(elementToValidate, v(), (err, result) => {\n      if(err) return reject(err)\n\n      resolve(result)\n    })\n\n  })\n}\n"]}